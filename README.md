[TOC]
# 手写一个IOC框架

-[ ] 提供一个beanPostProcessor接口 
-[ ] 后续把其他项目的所有用到spring的地方都换成我的这个。

-[ ] smart-framework需要再看吗，感觉之前看的时候也没有特别确定，而且关键是还是有很多地方需要学习的，比如说一直困扰我的插件问题。

-[ ] 如何接入其他的组件啊，要不要实现一个自己的MySQL组件？如何定义一个自己的缓存组件。

-[ ] 限流组件？这个好像已经有实现的了。

-[ ] 模仿spring的一些功能，比如InitializingBean

## 实现一个基于JSon的IOC框架

### IoC 是什么
wiki百科的解释是：

> 控制反转（Inversion of Control，缩写为IoC），是面向对象编程中的一种设计原则，可以用来减低计算机代码之间的耦合度。其中最常见的方式叫做依赖注入（Dependency Injection，简称DI）。通过控制反转，对象在被创建的时候，由一个调控系统内所有对象的外界实体，将其所依赖的对象的引用传递给它。也可以说，依赖被注入到对象中。

IoC框架的出现原因就是在Java开发过程中需要用到大量的类，如果类的数量比较少的话自己用的时候创建就可以了，但是一旦类比较多，而且依赖关系有比较复杂，那么就需要花大量的时间在维护类的关系上。而这些工作比较繁琐又与最后的结果关系不大，所以就可以把这部分工作抽离出来，搞一个框架来代替自己完成依赖关系的维护。

IoC 主要是以下几个步骤。

1. 初始化 IoC 容器。
2. 读取配置文件。
3. 将配置文件转换为容器识别对的数据结构（这个数据结构在Spring中叫做 BeanDefinition
4. 利用数据结构依次实例化相应的对象
5. 注入对象之间的依赖关系

完成一个IoC需要了解的知识：

- 反射的知识，IoC框架大量依赖反射
- 注解的使用
- 代理的使用

本部分参考[徒手撸框架--实现IoC](https://www.xilidou.com/2018/01/08/spring-ioc/) 完成

目前根据以上内容只是完成了一个基本的功能，离spring还差得远，接下来一起来改造一下。

## 模仿spring的IoC

下面我们来仿照着spring来做一个IoC

beanDefiniton是一个比较重要的类，spring关于benDefintion的在这有讲解：https://blog.csdn.net/qq_24549805/article/details/103724714



## mvc

开始实现mvc，先用netty做一个服务器，这个非常简单，几十行代码就可以搞定。

问题出现在ioc和mvc要不要耦合在一起。按理说不应该偶合在一起，因为本身spring和springmvc是不一样的。实现的功能不一样，应该有不同的启动方式。

所以我认为实现mvc还是不要和其他的偶合在一起了，逻辑应该放在启动netty之前，初始化一个容器，然后在这个基础之上添加功能，在这个过程，之前的启动方式应该是不能变化的。

## aop

目前还在调研过程中

